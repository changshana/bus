#@busCommon()
#define main()
#define css()
<style type="text/css">
    html, body {
        width: 100%;
        height: 100%;
        font-size: 14px;
    }

    #container {
        width: 70%;
        height: 100%;
        float: left;
    }

    #container-none {
        display: none;
    }

    * {
        margin: 0px;
        padding: 0px;
    }

    body, button, input, select, textarea {
        font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
    }

    .left {
        width: 28%;
        height: 100%;
        margin: 0 1%;
        float: left;
    }

    .info-out {
        width: 100%;
        height: 90%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .info {
        width: 96%;
        margin: 0 auto;
        height: auto;
    }

    .info .search-input {
        font-size: 16px;
        width: 100%;
        height: 35px;
        margin: 10px 0;
        border: 1px solid #aaaaaa;
        border-radius: 4px;
        line-height: 35px;
        color: #333;
        text-indent: 1em;
    }

    .btn {
        font-size: 18px;
        width: 100%;
        height: 35px;
        margin: 10px 0;
        line-height: 35px;
        border-radius: 4px;
        text-align: center;
        cursor: pointer;
        display: inline-block;
    }

    .btn_yes {
        color: #FFFFFF;
        background-color: #FFB800;
        border: 1px solid #FFB800;
    }

    .btn-choose {
        color: #FFFFFF;
        background-color: #01AAED;
        border: 1px solid #01AAED;
    }

    .rout-box, .choose-box, .other-info {
        width: 100%;
        height: auto;
    }

    .vehicle-info-box {
        width: 100%;
        height: auto;
    }

    .vehicle-info-box .vehicle-img {
        width: 100%;
        height: auto;
    }

    .vehicle-info-box > p {
        font-size: 16px;
        color: #333;
        height: 35px;
        line-height: 35px;
        width: 100%;
    }

    .vehicle-info-box > p > span {
        color: #FFB800;
        display: inline-block;
        float: right;
    }

    .gap {
        border-bottom: 1px solid #bbbbbb;
        width: 96%;
        height: 0;
        margin: 8px auto;
    }

    .other-info > p {
        width: 100%;
        height: auto;
        margin: 5px auto;
    }

    .other-info > P > span {
        font-size: 16px;
        color: #333;
        width: auto;
        margin: 10px auto;
        display: inline-block;
    }

    .input-panel {
        width: 100%;
        border: 1px solid #f2f2f2;
        background-color: #f2f2f2;
        height: 35px;
        line-height: 35px;
        cursor: pointer;
        caret-color: transparent;
        text-align: center;
    }

    .textarea {
        resize: none;
        line-height: 18px;
        font-size: 15px;
        height: 120px;
    }

    .btn-box {
        width: 98%;
        height: 10%;
        margin: 0 auto;
        position: relative;
    }

    .btn-back {
        width: 45%;
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: #2F4056;
        color: #FFFFFF;
        border: 1px solid #2F4056;
    }

    .btn-confirm {
        width: 45%;
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #01AAED;
        color: #FFFFFF;
        border: 1px solid #01AAED;
    }
</style>
#end
<div class="left">
    <div class="info-out">
        <div class="info">
            <div class="rout-box">
                <input class="search-input" id="start" placeholder="请输入起点..." value=""/>
                <input class="search-input" id="endPoint" placeholder="请输入终点..." value=""/>
                <a class="btn btn_yes" id="confirm_point">确定</a>
                <div class="gap"></div>
            </div>
            <div class="other-info">
                <p>
                    <span>出发时间</span>
                    <input class="input-panel" id="time" readonly/>
                </p>
                <p>
                    <span>备注信息</span>
                    <textarea class="layui-textarea textarea" maxlength="300"></textarea>
                </p>
            </div>
            <div class="choose-box">
                <a class="btn btn-choose" id="choose_bus">点击选择车辆</a>
                <div class="vehicle-info-box">
                    <img class="vehicle-img" src="lp/bus/img/vehicle.jpg"/>
                    <p>车辆类型：<span>大巴车</span></p>
                    <p>荷载人数：<span>45人</span></p>
                    <p>车牌号：<span>川A 45V67</span></p>
                    <p>基础价格：<span>￥100.00元</span></p>
                </div>
                <div class="gap"></div>
            </div>
            <div class="choose-box">
                <a class="btn btn-choose" id="choose_driver">点击选择驾驶员</a>
                <div class="vehicle-info-box">
                    <!--                <img src="lp/bus/img/vehicle.jpg" class="vehicle-img" />-->
                    <p>姓名：<span>驾驶员A</span></p>
                    <p>联系电话：<span>12345678910</span></p>
                    <p>服务星级：<span id="rate-panel">*****</span></p>
                    <div class="gap"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="btn-box">
        <button class="btn btn-confirm">确定</button>
        <button class="btn btn-back">返回</button>
    </div>
</div>
<div id="container-none"></div>
<div id="container"></div>

<script charset="utf-8"
        src="https://map.qq.com/api/js?v=2.exp&key=ZHLBZ-IUWCK-GIUJ2-AQQHR-KLO7S-6NFCR&libraries=place,tools"></script>
<script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=ZHLBZ-IUWCK-GIUJ2-AQQHR-KLO7S-6NFCR"></script>
<script charset="UTF-8" src="lp/bus/js/add_order_map.js"></script>
<script>
    let startPoiList = null, startIndex = null;
    let endPoiList = null, endIndex = null;
    layui.use(['layer', 'rate', 'laydate'], function () {
        let layer = layui.layer;
        let rate = layui.rate;
        let laydate = layui.laydate;
        init();
        laydate.render({
            elem: "#time"
            , type: "datetime"
            , min: 0
            , format: 'yyyy-MM-dd HH:mm'
            , range: " ~ "
        });
        //渲染
        var ins1 = rate.render({
            elem: '#rate-panel'  //绑定元素
            , value: 5
            , readonly: true
        });
        $("#choose_bus").bind('click', function () {
            layer.open({
                type: 2
                , title: '选择车辆'
                , content: 'busOrder/toBusChoose'
                //,area:['1360px','870px']
                , area: ['95%', '95%']
                , shade: .3
                , end: function () {

                }
            });
        });
        $("#choose_driver").bind('click', function () {
            layer.open({
                type: 2
                , title: '选择驾驶员'
                , content: 'busOrder/toDriverChoose'
                // ,area:['1400px','850px']
                , area: ['95%', '95%']
                , shade: .3
                , end: function () {

                }
            });
        });
        $(".btn-back").bind('click', function () {
            history.go(-1);
        });
        $(".btn-confirm").bind('click', function () {
            //TODO 提交申请
        });
    });
    $(".btn_yes").bind('click', function () {
        if (isEmpty($("#start").val()) || isEmpty(startPoiList) || isEmpty(startPoiList[startIndex])) {
            //layer.msg('请输入并选择起点', {icon: 5,shade:.5,time: 2000});
            layer.tips('请输入并选择起点', '#start', {
                tips: 3
            });
            return false;
        }
        if (isEmpty($("#endPoint").val()) || isEmpty(endPoiList) || isEmpty(endPoiList[endIndex])) {
            //layer.msg('请输入并选择终点', {icon: 5,shade:.5,time: 2000});
            layer.tips('请输入并选择终点', '#endPoint', {
                tips: 3
            });
            return false;
        }
        //显示线路 里程和大致时间
        displayRout();
    });

</script>
#end
